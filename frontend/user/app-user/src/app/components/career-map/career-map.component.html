<div class="container my-5">
  <h1 class="mb-5">Trilha de Carreira</h1>

  <div class="accordion" id="listCompanyPositions">
    <ng-container *ngIf="companyPositions">
      <ng-container *ngFor="let position of companyPositions; let i = index">
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading{{i}}">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" [attr.data-bs-target]="'#collapse' + i" aria-expanded="false" [attr.aria-controls]="'collapse' + i" (click)="selectPosition(position.companyPosition.companyPositionId)">
              {{ position.companyPosition.companyPositionName }}
            </button>            
          </h2>
          <div [attr.id]="'collapse' + i" class="accordion-collapse collapse" [attr.aria-labelledby]="'heading' + i" data-bs-parent="#listCompanyPositions">
            <div class="accordion-body">
              <div *ngIf="requirements" class="d-flex flex-wrap gap-2 mb-3">
                <button *ngFor="let requirement of requirements" type="button" class="btn btn-primary" (click)="open(mymodal, requirement.requirement.requirementId)">
                  {{ requirement.requirement.requirementName }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>

  <ng-template #mymodal let-modal>
    <div class="modal-header">
      <h5 class="modal-title">Testes do Requesito</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <ul class="list-group">
        <li class="list-group-item" *ngFor="let test of tests">
          &#8226; <a [routerLink]="['/test', test.testId]" (click)="modal.dismiss('Cross click')">{{ test.description }}</a>
        </li>
      </ul>      
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="modal.dismiss('Cross click')">Fechar</button>
    </div>
  </ng-template>
</div>