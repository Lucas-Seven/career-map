@using admin.Api.Model.Response;
@model admin.Api.Model.Response.CompanyPositionListResponse

@{
    ViewData["Title"] = "Incluir associações de Cargos à Mapa de Carreira";

    var parms = new Dictionary<string, string>
    {
        { "careerMapId", $"{Model.CareerMapResponse.CareerMapId}"}
    };
}


@*@Model.CareerMapResponse.CareerMapId*@

<h4>@ViewData["Title"]</h4>
<hr />

<form asp-action="AssociatePositions">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    @*<div class="col-md-4">*@
        <div class="form-group">
            <input type="hidden" asp-for="CareerMapResponse.CareerMapId" />

            <label asp-for="CareerMapResponse.CareerMapName" class="control-label">Mapa de carreira</label>
            <input disabled asp-for="CareerMapResponse.CareerMapName" class="form-control" />
            <span asp-validation-for="CareerMapResponse.CareerMapName" class="text-danger"></span>
        </div>
    @*</div>*@

    <div class="form-group mt-3">
        <label for="posicao">Cargos disponíveis</label>


        @if (ViewBag.AvailablePositions != null)
        {
            var list = ((List<CompanyPositionInfo>)ViewBag.AvailablePositions);
@*            for (int i = 0; i < list.Count; i++)
            {
                var posicao = list[i];
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="posicao-@(i).CompanyPositionId" name="CompanyPositionResponseList[@(i)].CompanyPositionInfo.CompanyPositionId" value="@posicao.CompanyPositionId" />
                    <label class="form-check-label" for="posicao-@posicao.CompanyPositionId">@posicao.CompanyPositionName</label>
                </div>
            }*@
                    @*<input type="hidden" id="posicao-@(i).CompanyPositionName" name="CompanyPositionResponseList[@(i)].CompanyPositionInfo.CompanyPositionName" value="@posicao.CompanyPositionName" />*@



            <select class="form-control" id="posicao" name="CompanyPositionResponseList[0].CompanyPositionInfo.CompanyPositionId">
                @*<option value="">Selecione o cargo</option>*@
                @if(list == null || list.Count == 0)
                {
                    <option value="">Não existem cargos disponíveis para associação.</option>
                }
                else
                {
                    @foreach (var posicao in list)
                    {
                        <option value="@posicao.CompanyPositionId">@posicao.CompanyPositionName</option>
                    }
                }
            </select>
        }


    </div>

@*
    <div class="form-group mt-4">
        <label for="posicoes">Cargos disponíveis</label>
        <br />

        @if(ViewBag.AvailablePositions != null)
        {
            var list = ((List<CompanyPositionInfo>)ViewBag.AvailablePositions);
            for (int i = 0; i < list.Count; i++)
            {
                var posicao = list[i];
                <div class="form-check form-check-inline">
                    <input type="hidden" id="posicao-@(i).CompanyPositionName" name="CompanyPositionResponseList[@(i)].CompanyPositionInfo.CompanyPositionName" value="@posicao.CompanyPositionName" />
                    <input class="form-check-input" type="checkbox" id="posicao-@(i).CompanyPositionId" name="CompanyPositionResponseList[@(i)].CompanyPositionInfo.CompanyPositionId" value="@posicao.CompanyPositionId" />
                    <label class="form-check-label" for="posicao-@posicao.CompanyPositionId">@posicao.CompanyPositionName</label>
                </div>
            }
        }*@

@*        @if (ViewBag.AvailablePositions != null)
        {
            var list = ((List<CompanyPositionInfo>)ViewBag.AvailablePositions);
            for (int i = 0; i < list.Count; i++)
            {
                var posicao = list[i];
                <div class="form-check form-check-inline">
                    <input type="hidden" id="posicao-@(i).CompanyPositionName" name="CompanyPositionResponseList[@(i)].CompanyPositionInfo.CompanyPositionName" value="@posicao.CompanyPositionName" />
                    <input class="form-check-input" type="checkbox" id="posicao-@(i).CompanyPositionId" name="CompanyPositionResponseList[@(i)].CompanyPositionInfo.CompanyPositionId" value="@posicao.CompanyPositionId" />
                    <label class="form-check-label" for="posicao-@posicao.CompanyPositionId">@posicao.CompanyPositionName</label>
                </div>
            }
        }
    </div>
        *@

    @if (ViewBag.UnavailablePositions != null && ViewBag.UnavailablePositions.Count > 0)
    {
    <div class="form-group mt-3">
        <label for="posicoes">Cargos já associados</label>
        <br />

        @foreach (var posicao in ViewBag.UnavailablePositions)
        {
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="un-posicao-@posicao.CompanyPositionId" disabled checked value="@posicao.CompanyPositionId" />
                <label class="form-check-label" for="posicao-@posicao.CompanyPositionId">@posicao.CompanyPositionName</label>
            </div>
        }
    </div>
    }


    @*<div class="col-md-12">*@
        <div class="form-row mt-4 col-6">
            <div class="form-group">
            @*<div class="col">*@
                <input type="submit" value="Salvar" class="btn btn-md btn-success col-5"/>
            @*</div>*@
            @*<span class="col col-md-2">&nbsp;</span> *@
            @*<div class="col">*@

            <a class="col btn btn-md btn-outline-danger offset-1 col-5" asp-action="CompanyPositionsCareerMapDetail" asp-all-route-data="parms" >Cancelar</a>
            @*</div>*@
            </div>
        </div>
    @*</div>*@
</form>



@*


<form asp-action="Create">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <label asp-for="CareerMapResponse.CareerMapName" class="control-label">Mapa de carreira</label>
                <input disabled asp-for="CareerMapResponse.CareerMapName" class="form-control" />
                <span asp-validation-for="CareerMapResponse.CareerMapName" class="text-danger"></span>
            </div>
        </div>
    </div>


    <div class="row mt-md-4">
        <div class="col-md-12">
            <div class="row">
                <input type="submit" value="Salvar" class="btn btn-md btn-success col-md-5" />
                <span class="col-md-2"></span>
                <a class="btn btn-md btn-outline-danger col-md-5" asp-action="Index">Cancelar</a>
            </div>
        </div>
    </div>
</form>
*@


@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
